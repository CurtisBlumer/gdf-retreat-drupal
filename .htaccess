# Modify environment variables sent to PHP.
<IfModule mod_env.c>
  # Set the timezone to Central Time.
  SetEnv TZ America/Chicago
</IfModule>

# Various mod_rewrite rules.
<IfModule mod_rewrite.c>
  RewriteEngine on

  # Redirect to https:// if we were accessed via http://.
  RewriteCond %{HTTPS} !=on
  RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

  # Set "protossl" to "s" if we were accessed via https://.  This is used later
  # if you enable "www." stripping or enforcement, in order to ensure that
  # you don't bounce between http and https.
  RewriteRule ^ - [E=protossl]
  RewriteCond %{HTTPS} on
  RewriteRule ^ - [E=protossl:s]

  # Redirect all users to access the site WITHOUT the 'www.' prefix.
  RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
  RewriteRule ^ http%{ENV:protossl}://%1%{REQUEST_URI} [L,R=301]

  #RewriteBase /

  # Proxy requests to web/ without revealing we're located in a subdirectory.
  RewriteRule ^$ web/$1 [L]
  #RewriteCond %{REQUEST_URI} !^/web/
  RewriteRule ^(.*)$ web/$1 [L]
</IfModule>
